{"version":3,"sources":["webpack:///./src/mixins/timer.js","webpack:///./src/views/WaitLive.vue?b53c","webpack:///./src/views/WaitLive.vue?2316","webpack:///src/views/WaitLive.vue","webpack:///./src/views/WaitLive.vue?42f1","webpack:///./src/views/WaitLive.vue"],"names":["data","timer","computed","mapState","countDownDay","day","Math","floor","this","countDownTime","String","countDownHour","hour","countDownMinute","min","countDownSecond","sec","mounted","window","addEventListener","stopTimer","beforeDestroy","removeEventListener","methods","mapMutations","setCountDownTime","initTimer","setInterval","countdown","clearInterval","render","_vm","_h","$createElement","_c","_self","staticClass","_m","_v","_s","class","on","goLivePage","staticRenderFns","attrs","name","components","props","mixins","created","init","token","lineLogin","checkLiveStatusApi","checkLiveStatus","$router","push","alert","watch","component"],"mappings":"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","file":"js/chunk-48543d7d.1e93c90c.js","sourcesContent":["import { mapState, mapMutations } from \"vuex\";\n\nexport default {\n  data() {\n    return {\n      timer: null,\n    };\n  },\n  computed: {\n    ...mapState([\"countDownTime\"]),\n    countDownDay() {\n      let day = Math.floor(this.countDownTime / 60 / 60 / 24);\n      return day < 10 ? \"0\" + day : String(day);\n    },\n    countDownHour() {\n      let hour = Math.floor((this.countDownTime / 60 / 60) % 24);\n      return hour < 10 ? \"0\" + hour : String(hour);\n    },\n    countDownMinute() {\n      let min = Math.floor(((this.countDownTime / 60) % 1440) % 60);\n      return min < 10 ? \"0\" + min : String(min);\n    },\n    countDownSecond() {\n      let sec = Math.floor(this.countDownTime);\n      return sec < 10 ? \"0\" + sec : String(sec);\n    },\n  },\n  mounted() {\n    //監聽瀏覽器重整及關閉前將計時器移除\n    window.addEventListener(\"unload\", this.stopTimer);\n  },\n  beforeDestroy() {\n    //移除監聽\n    window.removeEventListener(\"unload\", this.stopTimer);\n    this.stopTimer();\n  },\n  methods: {\n    ...mapMutations({\n      setCountDownTime: \"SET_COUNT_DOWN_TIME\",\n    }),\n    initTimer() {\n      //設置計時器\n      if (this.timer) return;\n      this.timer = setInterval(this.countdown, 1000);\n    },\n    countdown() {\n      if (this.countDownTime > 0) {\n        this.setCountDownTime(this.countDownTime - 1);\n      } else {\n        this.stopTimer();\n      }\n    },\n    stopTimer() {\n      //移除計時器\n      clearInterval(this.timer);\n      this.timer = null;\n    },\n  },\n};\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WaitLive.vue?vue&type=style&index=0&id=d3712d0a&lang=sass&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home-wrapper\"},[_c('section',{staticClass:\"banner\"},[_vm._m(0),_c('div',{staticClass:\"slogan-ch\"},[_vm._v(\"百年傳承 40載起\")]),_c('div',{staticClass:\"slogan-en\"},[_vm._v(\"Century Heritage, Successor Innovation\")]),_c('div',{staticClass:\"timer\"},[_c('div',{staticClass:\"timer-title\"},[_vm._v(\"直播倒數\")]),_c('div',{staticClass:\"timer-box\"},[_c('div',{staticClass:\"timer-item\"},[_c('div',{staticClass:\"number\"},[_vm._v(_vm._s(_vm.countDownDay))]),_c('div',{staticClass:\"unit\"},[_vm._v(\"天\")])]),_c('div',{staticClass:\"timer-item\"},[_c('div',{staticClass:\"number\"},[_vm._v(_vm._s(_vm.countDownHour))]),_c('div',{staticClass:\"unit\"},[_vm._v(\"小時\")])]),_c('div',{staticClass:\"timer-item\"},[_c('div',{staticClass:\"number\"},[_vm._v(_vm._s(_vm.countDownMinute))]),_c('div',{staticClass:\"unit\"},[_vm._v(\"分鐘\")])])])]),_c('div',{staticClass:\"status\"},[_vm._v(\"直播尚未開放入場\")]),_vm._m(1),_c('div',{staticClass:\"main-btn\",class:{'disable': _vm.countDownTime > 0},on:{\"click\":_vm.goLivePage}},[_vm._v(\"開始觀看\")])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('figure',[_c('img',{attrs:{\"src\":require(\"@/assets/images/logo-country.png\")}})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"remark\"},[_vm._v(\"將於12/4下午2點開放入場\"),_c('br'),_vm._v(\"點擊以下按鈕，即可進入觀看！\")])}]\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n.home-wrapper\n  section.banner\n    figure\n      img(src=\"@/assets/images/logo-country.png\")\n    .slogan-ch 百年傳承 40載起\n    .slogan-en Century Heritage, Successor Innovation\n    .timer\n      .timer-title 直播倒數\n      .timer-box\n        .timer-item\n          .number {{countDownDay}}\n          .unit 天\n        .timer-item\n          .number {{countDownHour}}\n          .unit 小時\n        .timer-item\n          .number {{countDownMinute}}\n          .unit 分鐘\n    .status 直播尚未開放入場\n    .remark\n      | 將於12/4下午2點開放入場\n      br\n      | 點擊以下按鈕，即可進入觀看！\n    .main-btn(\n      :class=\"{'disable': countDownTime > 0}\"\n      @click=\"goLivePage\"\n    ) 開始觀看\n</template>\n\n<script>\nimport { mapState, mapActions } from \"vuex\";\nimport timer from \"@/mixins/timer.js\";\n\nexport default {\n  name: \"WaitLive\",\n  components: {},\n  props: {},\n  mixins: [timer],\n  data() {\n    return {};\n  },\n  computed: {\n    ...mapState([\"isLoading\", \"countDownTime\"]),\n  },\n  created() {},\n  mounted() {\n    this.init();\n  },\n  methods: {\n    ...mapActions([\"checkLiveStatus\"]),\n    init() {\n      if (this.token == \"\") {\n        this.lineLogin(process.env.VUE_APP_LIFF_ID_WAITLIVE)\n          .then(() => {\n            this.checkLiveStatusApi();\n            console.log(\"success\");\n          })\n          .catch(() => {\n            console.log(\"error\");\n          });\n      } else {\n        this.checkLiveStatusApi();\n      }\n    },\n    checkLiveStatusApi() {\n      this.checkLiveStatus()\n        .then((res) => {\n          console.log(\"success\");\n          if (!res.isBinding) {\n            this.$router.push({ name: \"Exchange\" });\n          } else if (res.countdownSeconds <= 0) {\n            this.$router.push({ name: \"Live\" });\n          } else {\n            this.initTimer();\n          }\n        })\n        .catch((e) => {\n          console.log(e);\n          if (e == \"userVerificationError\") {\n            this.init();\n          }\n          console.log(\"fail\");\n        });\n    },\n    goLivePage() {\n      if (this.countDownTime <= 0) {\n        this.$router.push({ name: \"Live\" });\n      } else {\n        alert(\"直播尚未開始！\");\n      }\n    },\n  },\n  watch: {},\n};\n</script>\n\n<style lang=\"sass\" scoped>\n@import \"@/assets/sass/var.sass\"\n\n.home-wrapper\n  section.banner\n    padding: 70px 0 50px\n    text-align: center\n    figure\n      width: 420px\n      margin: 0 auto 16px\n    .slogan-ch\n      font-size: 2.1rem\n      color: $green-001\n      letter-spacing: 2.1px\n      text-align: center\n    .slogan-en\n      font-size: 1.1rem\n      letter-spacing: 1.15px\n      color: $green-001\n    .timer\n      padding-top: 97px\n      .timer-title\n        font-size: 1.1rem\n        font-weight: bold\n      .timer-box\n        padding-top: 25px\n        .timer-item\n          margin: 0 20px\n          +dib\n          .number\n            font-size: 3.5rem\n            color: $red-001\n            +dib\n          .unit\n            padding-left: 20px\n            font-size: 1rem\n            color: $gray-003\n            +dib\n    .status\n      font-size: 0.9rem\n      line-height: 28px\n      color: $red-001\n    .remark\n      margin-top: 50px\n      font-size: 1rem\n      line-height: 28px\n      color: $gray-003\n    .disable\n      color: #999\n      border: 1px solid #ccc\n      background-color: #eee\n    +rwd(540px)\n      padding: 35px 0 25px\n      figure\n        width: 300px\n        // margin: 0 auto 16px\n      .slogan-ch\n        // font-size: 2.1rem\n        // letter-spacing: 2.1px\n      .slogan-en\n        // font-size: 1.1rem\n        // letter-spacing: 1.15px\n      .timer\n        padding-top: 50px\n        .timer-title\n          // font-size: 1.1rem\n        .timer-box\n          padding-top: 15px\n          .timer-item\n            margin: 0 10px\n            .number\n              font-size: 2.5rem\n            .unit\n              padding-left: 10px\n              // font-size: 1rem\n  section.intro\n    padding: 35px 0 75px\n    background-color: $gray-004\n    text-align: center\n    .title\n      font-size: 1.1rem\n      font-weight: bold\n    .info\n      padding: 25px 0 60px\n      color: $gray-003\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WaitLive.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WaitLive.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WaitLive.vue?vue&type=template&id=d3712d0a&scoped=true&lang=pug&\"\nimport script from \"./WaitLive.vue?vue&type=script&lang=js&\"\nexport * from \"./WaitLive.vue?vue&type=script&lang=js&\"\nimport style0 from \"./WaitLive.vue?vue&type=style&index=0&id=d3712d0a&lang=sass&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d3712d0a\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}